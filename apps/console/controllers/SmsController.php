<?php

namespace console\controllers;

use cdcchen\alidayu\ResponseException;
use Yii;
use yii\base\ErrorException;
use yii\console\Controller;

/**
 * 发短信
 *
 * @package mtwap\controllers
 * @author Jony <jonneyless@163.com>
 * @since 2016.11.21
 */
class SmsController extends Controller
{

    public $mobile = [
        //18652731590,
        //13771099556,
        //13705171256,
        //13862123947,
//        15651301305,
//        18505138592,
//        13952820197,
//        13952063635,
//        18705172648,
//        15005154906,
//        15050786889,
//        18982119135,
//        18805258509,
//        15850555062,
//        13951799513,
//        15961798095,
//        13675119439,
//        13776082204,
//        15951315168,
//        13770638516,
//        15852000218,
//        13917151433,
//        15295536693,
//        13952598676,
//        18762630106,
//        18512523813,
//        13584006359,
//        17715233362,
//        15896247535,
//        15050640510,
//        13052256567,
//        18652368899,
//        15962509960,
//        18252108899,
//        13815292281,
//        18260086009,
//        13773677749,
//        13813992098,
//        1381400030,
//        13913026880,
//        13861761022,
//        13862951909,
//        15951315168,
//        13962987659,
//        18662111661,
//        13921870606,
//        13851653142,
//        13914718671,
//        13962990696,
//        15952695366,
//        15850725189,
//        15195815889,
//        15861075619,
//        13851783591,
//        18962162676,
//        13951703486,
//        13852292020,
//        13814869015,
//        13625280295,
//        13705237049,
//        18052381722,
//        15195983710,
//        15806170120,
//        13861192340,
//        13912628210,
//        13913726851,
//        13951587876,
//        13606171355,
//        15700198829,
//        15051565516,
//        18862113176,
//        13812031538,
//        13585083797,
//        18914787648,
//        13776026499,
//        15262407693,
//        18651113091,
//        18915581639,
//        15895341970,
//        13003591953,
//        18651111815,
//        13776082204,
//        18626166260,
//        13812793017,
//        15262479536,
//        13913777551,
//        15206216867,
//        15051565516,
//        18862926266,
//        13862207685,
//        13862207685,
//        13451562647,
//        18962162065,
//        18961309705,
//        15262912753,
//        13913639170,
//        13862123947,
//        15961856922,
//        13601439676,
//        13390969799,
//        18652511955,
//        13861825313,
//        13851560325,
//        18205015568,
//        13390969799,
//        13862951909,
//        13862236598,
//        15162846810,
//        13852292020,
//        13615235023,
//        13615235023,
//        13912866680,
//        13912866680,
//        13655179993,
//        13815200820,
//        13913391102,
//        13770573336,
//        15996936655,
//        15950610865,
//        13777487173,
//        13813826661,
//        13913963018,
//        13851621623,
//        13812527752,
//        15850085086,
//        15601586898,
//        15651885815,
//        13776671354,
//        13952799950,
//        15861949360,
//        18852166692,
//        18795883722,
//        15895211596,
//        18862780700,
//        15150646008,
//        13912983090,
//        15195815889,
//        15151190996,
//        13655179993,
//        13584008448,
//        18762630106,
//        13914718671,
//        13813993157,
//        15050551611,
//        15295732925,
//        15262027006,
//        13770573336,
//        13851783591,
//        13814716919,
//        13862031981,
//        13861938253,
//        18962162676,
//        13951685430,
//        15295732925,
//        13813992098,
//        13913026880,
//        13815292281,
//        18752069579,
//        13851774576,
//        13813826661,
//        13801589296,
//        17801084186,
//        13913858191,
//        13921145766,
//        15150646008,
//        13861859778,
//        13961869725,
//        13951599982,
//        18251081122,
//        18915581639,
//        18962169912,
//        15250753792,
//        13913726851,
//        13645169745,
//        15852837052,
//        18013166558,
//        13912628210,
//        15952152093,
//        13814869015,
//        13776026499,
//        15061899170,
//        15262479536,
//        15195676667,
//        13962967365,
//        18013166558,
//        13601541133,
//        15206216867,
//        18921288300,
//        15805249317,
//        15250753792,
//        18862926266,
//        18052621766,
//        13812623114,
//        18551283168,
//        13451562647,
//        15852823987,
//        13861825313,
    ];

    public function actionPost()
    {
        $sign = '情人节砍价活动';
        $template = 'SMS_48610159';

        /* @var \cdcchen\yii\alidayu\Client $client */
        $client = Yii::$app->get('alidayu');

        try {
            $result = $client->sendSms($this->mobile, $sign, $template, [], '9cubic.com');
            if (!$result->getSuccess()) {
                throw new ResponseException('no');
            }
            echo " yes\n";
        } catch (ResponseException $e) {
            echo " no\n";
        } catch (ErrorException $e) {
            echo " no\n";
        }
    }

}
